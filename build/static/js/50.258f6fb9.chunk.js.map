{"version":3,"sources":["views/PaytmRedirect/PaytmRedirect.js"],"names":["PaytmRedirect","props","_this","Object","_home_sadam_Music_Projects_Tream11_Fancy11_fronproject_front_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_home_sadam_Music_Projects_Tream11_Fancy11_fronproject_front_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_home_sadam_Music_Projects_Tream11_Fancy11_fronproject_front_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","paytmRedirect","checkSumIntegrate","then","result","apiUrl","args1","MID","ORDER_ID","match","params","orderid","CUST_ID","sessionStorage","getItem","INDUSTRY_TYPE_ID","CHANNEL_ID","TXN_AMOUNT","amount","WEBSITE","CHECKSUMHASH","MSISDN","VERIFIED_BY","IS_USER_VERIFIED","object","method","headers","body","JSON","stringify","concat","config","PAYTM_TXN_URL","fetch","response","console","log","checkresponse","status","message","catch","error","toString","formthis","_home_sadam_Music_Projects_Tream11_Fancy11_fronproject_front_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","Promise","resolve","redirect","arg2","custid","txnamount","pcode","promocode","Content-Type","Authorization","api_url","API_URL","json","data","setState","checksum","onChange","e","state","sessioncheck","prevProps","prevState","CALLBACK_URL","document","getElementById","submit","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","name","id","action","type","onBeforeInput","value","className","Component"],"mappings":"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","file":"static/js/50.258f6fb9.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport config from './../../config'\nimport { checkresponse, sessioncheck} from './../../Comman';\n\nclass PaytmRedirect extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      checksum:false\n    };\n    sessioncheck();\n  }\n\n\n  componentDidMount() {\n    //sessioncheck();\n    //this.paytmRedirect()\n    this.checkSumIntegrate();\n\n  }\n\n  paytmRedirect = () => {\n    this.checkSumIntegrate().then(result => {\n      if (result !== false) {\n        var args1 = {\n          MID: \"KEwVzk68823288397743\",\n          ORDER_ID: (this.props.match.params.orderid),\n          CUST_ID: sessionStorage.getItem(\"username\"),\n          INDUSTRY_TYPE_ID: \"Retail\",\n          CHANNEL_ID: \"WEB\",\n          TXN_AMOUNT: (this.props.match.params.amount),\n          WEBSITE: \"WEB_STAGING\",\n          CHECKSUMHASH:result,\n          //CALLBACK_URL:\"http://192.168.1.74:3000/Home\",\n          MSISDN :\"7820888883\", //Mobile number of customer\n          //EMAIL : $EMAIL, //Email ID of customer\n          VERIFIED_BY : \"EMAIL\", //\n          IS_USER_VERIFIED : \"YES\"\n        };\n\n        var object = {\n          method: 'POST',\n          headers: {\n            //'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(args1)\n        }\n\n        var apiUrl = \"\";\n        apiUrl = `${config.PAYTM_TXN_URL}`;\n\n        fetch(apiUrl, object)\n          .then(function (response) {\n            console.log(\"response===>>>\",response);\n            var chkresp = checkresponse(\"Wrong\", response.status, response.message, 2);\n            // if (chkresp === true) {\n            //   response.json().then(json => {\n            //     if (json.error === false) {\n            //       //window.location.href =HBRout+\"/MyAccount\";\n            //     }\n            //     else {\n            //       checkresponse(\"Warning\", false, json.msg, 3);\n            //     }\n            //   })\n            // }\n          }).catch(error => {\n            checkresponse(\"Wrong\", false, error.toString(), 0);\n          });\n      }\n      else\n      {\n        \n      }\n    })\n  }\n\n\n  checkSumIntegrate = () => {\n    let formthis=this;\n    return new Promise(function (resolve, redirect) {\n      let arg2 = {\n        orderid: (formthis.props.match.params.orderid),\n        custid: sessionStorage.getItem(\"username\"),\n        //industrytypeid: \"Retail\",\n        //channelid: \"WEB\",\n        txnamount: (formthis.props.match.params.amount),\n        pcode:(formthis.props.match.params.promocode===\"no\")?\"\":formthis.props.match.params.promocode\n      }\n      var object = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + sessionStorage.getItem('jwt') + ''\n        },\n        body: JSON.stringify(arg2)\n      }\n\n      var apiUrl = \"\";\n      var api_url = `${config.API_URL}`;\n      apiUrl = api_url + \"/frontapi/generatechecksum\";\n\n      fetch(apiUrl, object)\n        .then(function (response) {\n          \n          var chkresp = checkresponse(\"Wrong\", response.status, response.message, 2);\n          if (chkresp === true) {\n            response.json().then(json => {\n              console.log(\"json=\",json);\n              if (json.error === false) {\n                console.log(\"checkkkkkkkkk-\",json.data);\n                \n                formthis.setState({checksum:json.data})\n                //sessionStorage.setItem(\"checksum\",json.data);\n                resolve(json.data);\n                //window.location.href =HBRout+\"/MyAccount\";\n              }\n              else {\n                resolve(false);\n              }\n            })\n          }\n          else {\n            resolve(false);\n          }\n        }).catch(error => {\n          resolve(false);\n        });\n\n    })\n  }\n\n\n  onChange=(e)=>{\n    //console.log(\"e---->>>\",e.target)\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if(this.state.checksum.MID &&\n      this.state.checksum.ORDER_ID  &&\n      this.state.checksum.CUST_ID  &&\n      this.state.checksum.INDUSTRY_TYPE_ID  &&\n      this.state.checksum.CHANNEL_ID  &&\n      this.state.checksum.TXN_AMOUNT  &&\n      this.state.checksum.WEBSITE  &&\n      this.state.checksum.CALLBACK_URL  &&\n      this.state.checksum.checksum)\n    {\n      document.getElementById('f1').submit();\n    }\n  }\n\n  render() {\n    const formthis = this;\n    let PAYTM_TXN_URL=`${config.PAYTM_TXN_URL}`;\n    \n    return (\n      <div>\n        <center><h1>Please do not refresh this page...</h1></center>\n        <form name=\"f1\" id=\"f1\" method=\"post\" action={PAYTM_TXN_URL}>\n        \n                <input type=\"hidden\" id=\"MID\" name=\"MID\" onBeforeInput={this.onChange} value={this.state.checksum.MID} />\n                <input type=\"hidden\" id=\"ORDER_ID\" name=\"ORDER_ID\" value={this.state.checksum.ORDER_ID} />\n                <input type=\"hidden\" id=\"CUST_ID\" name=\"CUST_ID\" value={this.state.checksum.CUST_ID} />\n                <input type=\"hidden\" id=\"INDUSTRY_TYPE_ID\" name=\"INDUSTRY_TYPE_ID\" value={this.state.checksum.INDUSTRY_TYPE_ID} />\n                <input type=\"hidden\" id=\"CHANNEL_ID\" name=\"CHANNEL_ID\" value={this.state.checksum.CHANNEL_ID} />\n                <input type=\"hidden\" id=\"TXN_AMOUNT\" name=\"TXN_AMOUNT\" value={this.state.checksum.TXN_AMOUNT} />\n                <input type=\"hidden\" id=\"WEBSITE\" name=\"WEBSITE\" value={this.state.checksum.WEBSITE} />\n                <input type=\"hidden\" id=\"CALLBACK_URL\" name=\"CALLBACK_URL\" value={this.state.checksum.CALLBACK_URL} /> \n                <input type=\"hidden\" id=\"CHECKSUMHASH\" name=\"CHECKSUMHASH\" value={this.state.checksum.checksum} />\n            \n          <input type=\"submit\" id=\"s1\" name=\"s1\" value=\"Submit\" className=\"hidden\"  />\n          \n        </form>\n      </div>\n    );\n  }\n}\n\nexport default PaytmRedirect;\n"],"sourceRoot":""}