{"version":3,"sources":["views/PaytmRedirect/PaytmRedirect.js"],"names":["PaytmRedirect","props","_this","Object","F_BRSoftech_11plays_11playsfront_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","F_BRSoftech_11plays_11playsfront_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","F_BRSoftech_11plays_11playsfront_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","paytmRedirect","checkSumIntegrate","then","result","apiUrl","args1","MID","ORDER_ID","match","params","orderid","CUST_ID","sessionStorage","getItem","INDUSTRY_TYPE_ID","CHANNEL_ID","TXN_AMOUNT","amount","WEBSITE","CHECKSUMHASH","MSISDN","VERIFIED_BY","IS_USER_VERIFIED","object","method","headers","body","JSON","stringify","concat","config","PAYTM_TXN_URL","fetch","response","console","log","checkresponse","status","message","catch","error","toString","formthis","F_BRSoftech_11plays_11playsfront_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","Promise","resolve","redirect","arg2","custid","txnamount","pcode","promocode","Content-Type","Authorization","api_url","API_URL","json","data","setState","checksum","onChange","e","state","sessioncheck","prevProps","prevState","CALLBACK_URL","document","getElementById","submit","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","name","id","action","type","onBeforeInput","value","className","Component"],"mappings":"wLAIMA,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAeRQ,cAAgB,WACdP,EAAKQ,oBAAoBC,KAAK,SAAAC,GAC5B,IAAe,IAAXA,EAAkB,CACpB,IAwBIC,EAxBAC,EAAQ,CACVC,IAAK,uBACLC,SAAWd,EAAKD,MAAMgB,MAAMC,OAAOC,QACnCC,QAASC,eAAeC,QAAQ,YAChCC,iBAAkB,SAClBC,WAAY,MACZC,WAAavB,EAAKD,MAAMgB,MAAMC,OAAOQ,OACrCC,QAAS,cACTC,aAAahB,EAEbiB,OAAQ,aAERC,YAAc,QACdC,iBAAmB,OAGjBC,EAAS,CACXC,OAAQ,OACRC,QAAS,GAGTC,KAAMC,KAAKC,UAAUvB,IAIvBD,EAAM,GAAAyB,OAAMC,IAAOC,eAEnBC,MAAM5B,EAAQmB,GACXrB,KAAK,SAAU+B,GACdC,QAAQC,IAAI,iBAAiBF,GACfG,YAAc,QAASH,EAASI,OAAQJ,EAASK,QAAS,KAWvEC,MAAM,SAAAC,GACPJ,YAAc,SAAS,EAAOI,EAAMC,WAAY,SA7DvChD,EAwEnBQ,kBAAoB,WAClB,IAAIyC,EAAShD,OAAAiD,EAAA,EAAAjD,QAAAiD,EAAA,EAAAjD,CAAAD,IACb,OAAO,IAAImD,QAAQ,SAAUC,EAASC,GACpC,IAAIC,EAAO,CACTrC,QAAUgC,EAASlD,MAAMgB,MAAMC,OAAOC,QACtCsC,OAAQpC,eAAeC,QAAQ,YAG/BoC,UAAYP,EAASlD,MAAMgB,MAAMC,OAAOQ,OACxCiC,MAA+C,OAAxCR,EAASlD,MAAMgB,MAAMC,OAAO0C,UAAkB,GAAGT,EAASlD,MAAMgB,MAAMC,OAAO0C,WAElF5B,EAAS,CACXC,OAAQ,OACRC,QAAS,CACP2B,eAAgB,mBAChBC,cAAiB,UAAYzC,eAAeC,QAAQ,QAEtDa,KAAMC,KAAKC,UAAUmB,IAInBO,EAAO,GAAAzB,OAAMC,IAAOyB,SAGxBvB,MAFSsB,EAAU,6BAEL/B,GACXrB,KAAK,SAAU+B,IAGE,IADFG,YAAc,QAASH,EAASI,OAAQJ,EAASK,QAAS,GAEtEL,EAASuB,OAAOtD,KAAK,SAAAsD,GACnBtB,QAAQC,IAAI,QAAQqB,IACD,IAAfA,EAAKhB,OACPN,QAAQC,IAAI,iBAAiBqB,EAAKC,MAElCf,EAASgB,SAAS,CAACC,SAASH,EAAKC,OAEjCZ,EAAQW,EAAKC,OAIbZ,GAAQ,KAKZA,GAAQ,KAETN,MAAM,SAAAC,GACPK,GAAQ,QAxHGpD,EA+HnBmE,SAAS,SAACC,KA7HRpE,EAAKqE,MAAQ,CACXH,UAAS,GAEXI,cALiBtE,mFAYjBG,KAAKK,+DAuHY+D,EAAWC,GACzBrE,KAAKkE,MAAMH,SAASrD,KACrBV,KAAKkE,MAAMH,SAASpD,UACpBX,KAAKkE,MAAMH,SAAShD,SACpBf,KAAKkE,MAAMH,SAAS7C,kBACpBlB,KAAKkE,MAAMH,SAAS5C,YACpBnB,KAAKkE,MAAMH,SAAS3C,YACpBpB,KAAKkE,MAAMH,SAASzC,SACpBtB,KAAKkE,MAAMH,SAASO,cACpBtE,KAAKkE,MAAMH,SAASA,UAEpBQ,SAASC,eAAe,MAAMC,0CAKhC,IACItC,EAAa,GAAAF,OAAIC,IAAOC,eAE5B,OACEuC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,cAAQF,EAAAC,EAAAC,cAAA,iDACRF,EAAAC,EAAAC,cAAA,QAAMC,KAAK,KAAKC,GAAG,KAAKlD,OAAO,OAAOmD,OAAQ5C,GAEtCuC,EAAAC,EAAAC,cAAA,SAAOI,KAAK,SAASF,GAAG,MAAMD,KAAK,MAAMI,cAAejF,KAAKgE,SAAUkB,MAAOlF,KAAKkE,MAAMH,SAASrD,MAClGgE,EAAAC,EAAAC,cAAA,SAAOI,KAAK,SAASF,GAAG,WAAWD,KAAK,WAAWK,MAAOlF,KAAKkE,MAAMH,SAASpD,WAC9E+D,EAAAC,EAAAC,cAAA,SAAOI,KAAK,SAASF,GAAG,UAAUD,KAAK,UAAUK,MAAOlF,KAAKkE,MAAMH,SAAShD,UAC5E2D,EAAAC,EAAAC,cAAA,SAAOI,KAAK,SAASF,GAAG,mBAAmBD,KAAK,mBAAmBK,MAAOlF,KAAKkE,MAAMH,SAAS7C,mBAC9FwD,EAAAC,EAAAC,cAAA,SAAOI,KAAK,SAASF,GAAG,aAAaD,KAAK,aAAaK,MAAOlF,KAAKkE,MAAMH,SAAS5C,aAClFuD,EAAAC,EAAAC,cAAA,SAAOI,KAAK,SAASF,GAAG,aAAaD,KAAK,aAAaK,MAAOlF,KAAKkE,MAAMH,SAAS3C,aAClFsD,EAAAC,EAAAC,cAAA,SAAOI,KAAK,SAASF,GAAG,UAAUD,KAAK,UAAUK,MAAOlF,KAAKkE,MAAMH,SAASzC,UAC5EoD,EAAAC,EAAAC,cAAA,SAAOI,KAAK,SAASF,GAAG,eAAeD,KAAK,eAAeK,MAAOlF,KAAKkE,MAAMH,SAASO,eACtFI,EAAAC,EAAAC,cAAA,SAAOI,KAAK,SAASF,GAAG,eAAeD,KAAK,eAAeK,MAAOlF,KAAKkE,MAAMH,SAASA,WAE5FW,EAAAC,EAAAC,cAAA,SAAOI,KAAK,SAASF,GAAG,KAAKD,KAAK,KAAKK,MAAM,SAASC,UAAU,oBAtK9CC,aA8KbzF","file":"static/js/50.341f238f.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport config from './../../config'\r\nimport { checkresponse, sessioncheck} from './../../Comman';\r\n\r\nclass PaytmRedirect extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      checksum:false\r\n    };\r\n    sessioncheck();\r\n  }\r\n\r\n\r\n  componentDidMount() {\r\n    //sessioncheck();\r\n    //this.paytmRedirect()\r\n    this.checkSumIntegrate();\r\n\r\n  }\r\n\r\n  paytmRedirect = () => {\r\n    this.checkSumIntegrate().then(result => {\r\n      if (result !== false) {\r\n        var args1 = {\r\n          MID: \"KEwVzk68823288397743\",\r\n          ORDER_ID: (this.props.match.params.orderid),\r\n          CUST_ID: sessionStorage.getItem(\"username\"),\r\n          INDUSTRY_TYPE_ID: \"Retail\",\r\n          CHANNEL_ID: \"WEB\",\r\n          TXN_AMOUNT: (this.props.match.params.amount),\r\n          WEBSITE: \"WEB_STAGING\",\r\n          CHECKSUMHASH:result,\r\n          //CALLBACK_URL:\"http://192.168.1.74:3000/Home\",\r\n          MSISDN :\"7820888883\", //Mobile number of customer\r\n          //EMAIL : $EMAIL, //Email ID of customer\r\n          VERIFIED_BY : \"EMAIL\", //\r\n          IS_USER_VERIFIED : \"YES\"\r\n        };\r\n\r\n        var object = {\r\n          method: 'POST',\r\n          headers: {\r\n            //'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(args1)\r\n        }\r\n\r\n        var apiUrl = \"\";\r\n        apiUrl = `${config.PAYTM_TXN_URL}`;\r\n\r\n        fetch(apiUrl, object)\r\n          .then(function (response) {\r\n            console.log(\"response===>>>\",response);\r\n            var chkresp = checkresponse(\"Wrong\", response.status, response.message, 2);\r\n            // if (chkresp === true) {\r\n            //   response.json().then(json => {\r\n            //     if (json.error === false) {\r\n            //       //window.location.href =HBRout+\"/MyAccount\";\r\n            //     }\r\n            //     else {\r\n            //       checkresponse(\"Warning\", false, json.msg, 3);\r\n            //     }\r\n            //   })\r\n            // }\r\n          }).catch(error => {\r\n            checkresponse(\"Wrong\", false, error.toString(), 0);\r\n          });\r\n      }\r\n      else\r\n      {\r\n        \r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  checkSumIntegrate = () => {\r\n    let formthis=this;\r\n    return new Promise(function (resolve, redirect) {\r\n      let arg2 = {\r\n        orderid: (formthis.props.match.params.orderid),\r\n        custid: sessionStorage.getItem(\"username\"),\r\n        //industrytypeid: \"Retail\",\r\n        //channelid: \"WEB\",\r\n        txnamount: (formthis.props.match.params.amount),\r\n        pcode:(formthis.props.match.params.promocode===\"no\")?\"\":formthis.props.match.params.promocode\r\n      }\r\n      var object = {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': 'Bearer ' + sessionStorage.getItem('jwt') + ''\r\n        },\r\n        body: JSON.stringify(arg2)\r\n      }\r\n\r\n      var apiUrl = \"\";\r\n      var api_url = `${config.API_URL}`;\r\n      apiUrl = api_url + \"/frontapi/generatechecksum\";\r\n\r\n      fetch(apiUrl, object)\r\n        .then(function (response) {\r\n          \r\n          var chkresp = checkresponse(\"Wrong\", response.status, response.message, 2);\r\n          if (chkresp === true) {\r\n            response.json().then(json => {\r\n              console.log(\"json=\",json);\r\n              if (json.error === false) {\r\n                console.log(\"checkkkkkkkkk-\",json.data);\r\n                \r\n                formthis.setState({checksum:json.data})\r\n                //sessionStorage.setItem(\"checksum\",json.data);\r\n                resolve(json.data);\r\n                //window.location.href =HBRout+\"/MyAccount\";\r\n              }\r\n              else {\r\n                resolve(false);\r\n              }\r\n            })\r\n          }\r\n          else {\r\n            resolve(false);\r\n          }\r\n        }).catch(error => {\r\n          resolve(false);\r\n        });\r\n\r\n    })\r\n  }\r\n\r\n\r\n  onChange=(e)=>{\r\n    //console.log(\"e---->>>\",e.target)\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if(this.state.checksum.MID &&\r\n      this.state.checksum.ORDER_ID  &&\r\n      this.state.checksum.CUST_ID  &&\r\n      this.state.checksum.INDUSTRY_TYPE_ID  &&\r\n      this.state.checksum.CHANNEL_ID  &&\r\n      this.state.checksum.TXN_AMOUNT  &&\r\n      this.state.checksum.WEBSITE  &&\r\n      this.state.checksum.CALLBACK_URL  &&\r\n      this.state.checksum.checksum)\r\n    {\r\n      document.getElementById('f1').submit();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const formthis = this;\r\n    let PAYTM_TXN_URL=`${config.PAYTM_TXN_URL}`;\r\n    \r\n    return (\r\n      <div>\r\n        <center><h1>Please do not refresh this page...</h1></center>\r\n        <form name=\"f1\" id=\"f1\" method=\"post\" action={PAYTM_TXN_URL}>\r\n        \r\n                <input type=\"hidden\" id=\"MID\" name=\"MID\" onBeforeInput={this.onChange} value={this.state.checksum.MID} />\r\n                <input type=\"hidden\" id=\"ORDER_ID\" name=\"ORDER_ID\" value={this.state.checksum.ORDER_ID} />\r\n                <input type=\"hidden\" id=\"CUST_ID\" name=\"CUST_ID\" value={this.state.checksum.CUST_ID} />\r\n                <input type=\"hidden\" id=\"INDUSTRY_TYPE_ID\" name=\"INDUSTRY_TYPE_ID\" value={this.state.checksum.INDUSTRY_TYPE_ID} />\r\n                <input type=\"hidden\" id=\"CHANNEL_ID\" name=\"CHANNEL_ID\" value={this.state.checksum.CHANNEL_ID} />\r\n                <input type=\"hidden\" id=\"TXN_AMOUNT\" name=\"TXN_AMOUNT\" value={this.state.checksum.TXN_AMOUNT} />\r\n                <input type=\"hidden\" id=\"WEBSITE\" name=\"WEBSITE\" value={this.state.checksum.WEBSITE} />\r\n                <input type=\"hidden\" id=\"CALLBACK_URL\" name=\"CALLBACK_URL\" value={this.state.checksum.CALLBACK_URL} /> \r\n                <input type=\"hidden\" id=\"CHECKSUMHASH\" name=\"CHECKSUMHASH\" value={this.state.checksum.checksum} />\r\n            \r\n          <input type=\"submit\" id=\"s1\" name=\"s1\" value=\"Submit\" className=\"hidden\"  />\r\n          \r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PaytmRedirect;\r\n"],"sourceRoot":""}